@model ViewmMODeElMASTER
@{
    ViewData["Title"] = "Print Label";
    Layout = null;
}
<style>
    body {
        font-family: Arial, sans-serif;
        font-size: 12px;
    }

    .label-container {
        border: 1px solid #000;
        width: 231px;
        padding: 10px;
        box-sizing: border-box;
    }

    .section {
        margin-bottom: 10px;
        border: 1px solid #000;
        padding: 5px;
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        padding-bottom: 5px;
        border-bottom: 1px solid #000;
    }

    .logo {
        width: 50px;
        height: 50px;
    }

    .text-container {
        flex-grow: 1;
        text-align: right;
        font-size: 14px;
    }

    .address-section, .product-details {
        margin-top: 10px;
        font-size: 12px;
    }

    .footer {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 5px;
        border-top: 1px solid #000;
    }

    .sellingPrice {
        font-size: 20px;
        font-weight: bolder;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
    }


    .qr-code {
        width: 80px;
        height: 80px;
        margin-bottom: 5px;
    }

    .barcode {
        width: 180px;
        height: 40px;
        margin-top: 5px;
    }

    .upc {
        text-align: center;
        margin-top: 5px;
        font-size: 14px;
    }

    .merchant-initial {
        width: 100px;
        height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid #000;
        background-color: #f0f0f0;
        border-radius: 0; /* إزالة الحواف المستديرة لجعل الإطار مربعًا */
    }

        .merchant-initial .initial {
            font-size: 48px; /* حجم الخط كبير جدًا */
            font-weight: bold; /* الخط غامق */
            color: #333;
        }

    .qr-code {
        width: 100px; /* حجم QR Code */
        height: 100px;
    }

</style>



<div class="label-container">
    @foreach (var item in Model.ListCompanyInformatione)
    {
        <div class="header">
            @foreach (var item1 in Model.ListViewOrder)
            {
                <div class="merchant-initial">
                    @* نأخذ الحرف الأول من اسم التاجر *@
                    <span class="initial">
                        @item1.Name.Substring(0, 1)
                    </span>
                </div>
            }

            <div class="form-group">
                @foreach (var item1 in Model.ListViewOrder)
                {
                    <img class="qr-code" src="" alt="QR Code" />
                    <div hidden class="Code">@item1.Qrcode</div>
                }
            </div>
        </div>
    }

    @foreach (var item in Model.ListViewOrder)
    {
        <div class="section address-section">
            <p hidden>Merchant#: @item.Name</p>
            <p>Model#: @item.Model</p>
            <p>@item.TypesProduct</p>
            <p hidden>Warehouse Branch: @item.WareHouseBranchName</p>
        </div>

        <div class="section product-details">
            <p>@item.ProductName</p>
            <p class="sellingPrice">@item.sellingPrice $</p>
        </div>

        <div class="section footer">
            <div class="form-group">
                <img class="BarCodeUPC" src="" alt="Bar Code" class="img-fluid" />
                <div hidden class="UPCFORPR">@item.UbcSacund</div>
            </div>
            <div class="upc">@(!string.IsNullOrEmpty(item.UbcSacund) ? item.UbcSacund : "UPC: N/A")</div>
        </div>
    }
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="~/js/orderjava.js"></script>

<script>
    function updateQRCodeIn() {
        $('.qr-code').each(function () {
            var code = $(this).siblings('.Code').text();
            if (code) {
                $(this).attr('src', '@Url.Action("GenerateQRCode", "WareHouse")?text=' + encodeURIComponent(code));
            } else {
                $(this).attr('src', '');
            }
        });
    }

    function updateBarIn() {
        $('.BarCodeUPC').each(function () {
            var upc = $(this).siblings('.UPCFORPR').text();
            console.log(upc);
            if (upc) {
                $(this).attr('src', `@Url.Action("GenerateBarcode", "ProductInformationLowes")?text=` + encodeURIComponent(upc));
            } else {
                $(this).attr('src', '');
            }
        });
    }

    $(document).ready(function () {
        updateBarIn();
        updateQRCodeIn();
    });

</script>

